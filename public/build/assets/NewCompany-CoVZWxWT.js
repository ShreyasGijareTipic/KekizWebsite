import{w as F,r as l,j as e}from"./index-OeoBNat3.js";import{k as x,h as P}from"./api-8_quPuaU.js";import{C as I}from"./CRow-B0v1wP3B.js";import{C as _}from"./CCol-BhG1DmFz.js";import{C as R,a as w}from"./CCardBody-HZcxyyc1.js";import{C as D}from"./CCardHeader-D3QUcPyo.js";import{C as S}from"./CForm-nOHKzzo5.js";import{C as s}from"./CFormLabel-DxfY1rNV.js";import{C as o}from"./CFormInput-BMIMxTq1.js";import{C as q}from"./CFormSelect-B3syApAW.js";import{a as Q}from"./index.esm-BSQayu9G.js";function W(){const{showToast:j}=F(),[a,r]=l.useState({companyName:"",companyId:"",land_mark:"",Tal:"",Dist:"",Pincode:"",phone_no:"",bank_name:"",account_no:"",IFSC:"",logo:"",sign:"",paymentQRCode:"",appMode:"advance"}),t=l.useRef(null),c=l.useRef(null),m=l.useRef(null),[C,f]=l.useState(!1),N=[{label:"Basic",value:"basic"},{label:"Advance",value:"advance"}],n=p=>{const{name:d,value:g,files:i}=p.target;i&&i.length>0?r({...a,[d]:i[0]}):r({...a,[d]:g})},b=async p=>{p.preventDefault(),f(!0);try{const d=new FormData;d.append("file",a.logo),d.append("dest","invoice");const i=(await x("/api/fileUpload",d)).fileName,h=new FormData;h.append("file",a.sign),h.append("dest","invoice");const y=(await x("/api/fileUpload",h)).fileName,v=new FormData;v.append("file",a.paymentQRCode),v.append("dest","invoice");const k=(await x("/api/fileUpload",v)).fileName,u={...a,logo:i,sign:y,paymentQRCode:k};if(u.logo!=null&&u.sign!=null){const L=await P("/api/company",u);j("success","New Company is registered")}r({companyName:"",companyId:"",land_mark:"",Tal:"",Dist:"",Pincode:"",phone_no:"",bank_name:"",account_no:"",IFSC:"",logo:"",sign:"",paymentQRCode:""}),t.current&&(t.current.value=""),c.current&&(c.current.value=""),m.current&&(m.current.value="")}catch(d){j("danger","Error occured "+d),console.error("Error posting data:",d.response?d.response.data:d.message)}};return e.jsx(I,{children:e.jsx(_,{xs:12,children:e.jsxs(R,{className:"mb-3",children:[e.jsx(D,{children:e.jsx("strong",{children:"New Company"})}),e.jsx(w,{children:e.jsxs(S,{noValidate:!0,validated:C,onSubmit:b,encType:"multipart/form-data",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"land_mark",children:"Company Name"}),e.jsx(o,{type:"text",name:"companyName",id:"companyName",maxLength:"32",value:a.companyName,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"land_mark",children:"Address/Land Mark"}),e.jsx(o,{type:"text",name:"land_mark",id:"land_mark",maxLength:"32",value:a.land_mark,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"Tal",children:"Tal"}),e.jsx(o,{type:"text",name:"Tal",id:"Tal",maxLength:"32",value:a.Tal,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"Dist",children:"Dist"}),e.jsx(o,{type:"text",name:"Dist",id:"Dist",maxLength:"32",value:a.Dist,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"Pincode",children:"Pin code"}),e.jsx(o,{type:"text",name:"Pincode",id:"Pincode",value:a.Pincode,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"phone_no",children:"Phone No"}),e.jsx(o,{type:"number",name:"phone_no",id:"phone_no",value:a.phone_no,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"bank_name",children:"Bank Name"}),e.jsx(o,{type:"text",name:"bank_name",id:"bank_name",value:a.bank_name,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"account_no",children:"Account No"}),e.jsx(o,{type:"number",name:"account_no",id:"account_no",value:a.account_no,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"IFSC",children:"IFSC"}),e.jsx(o,{type:"text",name:"IFSC",id:"IFSC",value:a.IFSC,onChange:n,feedbackInvalid:"Please provide valid data.",required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"logo",children:"Logo (PNG, max 2MB)"}),e.jsx(o,{type:"file",name:"logo",id:"logo",accept:"image/png/jpeg",onChange:n,ref:t,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"sign",children:"Sign (PNG, max 2MB)"}),e.jsx(o,{type:"file",name:"sign",id:"sign",accept:"image/png/jpeg",onChange:n,ref:c,feedbackInvalid:"Please provide valid data.",required:!0})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"paymentQRCode",children:"QR Code (PNG, max 2MB)"}),e.jsx(o,{type:"file",name:"paymentQRCode",id:"paymentQRCode",accept:"image/png/jpeg",onChange:n,ref:m,feedbackInvalid:"Please provide valid data.",required:!0})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(s,{htmlFor:"appMode",children:"Application Mode"}),e.jsx(q,{"aria-label":"Select Application Mode",value:a.appMode,id:"appMode",name:"appMode",options:N,onChange:n,required:!0,feedbackInvalid:"Select an application mode."})]})})}),e.jsx(Q,{type:"submit",color:"primary",children:"Submit"})]})})]})})})}export{W as default};
