import{y as j,r as l,w as g,j as e}from"./index-OeoBNat3.js";import{f as y,p as E}from"./api-8_quPuaU.js";import{C as v}from"./CRow-B0v1wP3B.js";import{C as N}from"./CCol-BhG1DmFz.js";import{C as b,a as w}from"./CCardBody-HZcxyyc1.js";import{C as T}from"./CCardHeader-D3QUcPyo.js";import{C as k}from"./CForm-nOHKzzo5.js";import{C as m}from"./CFormLabel-DxfY1rNV.js";import{C as i}from"./CFormInput-BMIMxTq1.js";import{C as F}from"./CFormTextarea-B_YXzpvY.js";import{C as S}from"./CFormCheck-B63ut1Bj.js";import{a as P}from"./index.esm-BSQayu9G.js";const G=()=>{const p=j(),[h,u]=l.useState(!1),{showToast:n}=g(),[r,c]=l.useState({id:0,name:"",slug:"",localName:"",show:!0,desc:""}),d=a=>{const{name:t,value:s}=a.target;c({...r,[t]:s})},x=a=>{const{name:t,checked:s}=a.target;c({...r,[t]:s})},C=async()=>{try{const a=await y("/api/expenseType/"+p.id);c({id:a.id,name:a.name,localName:a.localName,slug:a.slug,show:a.show==1,desc:a.desc})}catch(a){n("danger","Error occured "+a)}};l.useEffect(()=>{C()},[]);const f=async a=>{const t=a.currentTarget;if(a.preventDefault(),a.stopPropagation(),u(!0),t.checkValidity()!==!0)return;let s={...r};s.slug=s.name.replace(/[^\w]/g,"_");try{const o=await E("/api/expenseType/"+s.id,s);o!=null&&o.id?n("success","ExpenseType updated successfully"):n("danger","Error occured, please try again later.")}catch(o){n("danger","Error occured "+o)}};return e.jsx(v,{children:e.jsx(N,{xs:12,children:e.jsxs(b,{className:"mb-4",children:[e.jsx(T,{children:e.jsx("strong",{children:"Edit ExpenseType"})}),e.jsx(w,{children:e.jsxs(k,{noValidate:!0,validated:h,onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"pname",children:"ExpenseType Name"}),e.jsx(i,{type:"text",id:"pname",placeholder:"Expense Name",name:"name",value:r.name,onChange:d,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"pname",children:"ExpenseType Local Name"}),e.jsx(i,{type:"text",id:"plname",placeholder:"Expense Name",name:"localName",value:r.localName,onChange:d,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"desc",children:"Short Description"}),e.jsx(F,{id:"desc",rows:3,name:"desc",value:r.desc,onChange:d,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(S,{id:"flexCheckDefault",label:"Show for expense records",name:"show",checked:r.show,onChange:x})}),e.jsx("div",{className:"mb-3",children:e.jsx(P,{color:"success",type:"submit",children:"Update"})})]})})]})})})};export{G as default};
