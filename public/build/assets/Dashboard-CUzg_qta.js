import{r as p,j as s}from"./index-OeoBNat3.js";import{c as e}from"./index.esm-BSQayu9G.js";import{c}from"./cil-chat-bubble-De0T3Ux-.js";var g=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M422,226.067H312v-96H276A85.425,85.425,0,0,0,293.054,78.5c0-27.64-13.079-53.611-34.133-67.776l-8.932-6.01-8.931,6.01C220,24.891,206.925,50.861,206.925,78.5a85.425,85.425,0,0,0,17.059,51.566H184v96H90a58.066,58.066,0,0,0-58,58V464a32.036,32.036,0,0,0,32,32H448a32.036,32.036,0,0,0,32-32V284.067A58.066,58.066,0,0,0,422,226.067ZM249.989,45.542c6.99,8.684,11.065,20.466,11.065,32.959s-4.075,24.276-11.065,32.959C243,102.777,238.925,90.994,238.925,78.5S243,54.226,249.989,45.542ZM216,162.067h64v64H216Zm-152,122a26.03,26.03,0,0,1,26-26H422a26.03,26.03,0,0,1,26,26l0,31.577L426.4,325.175a33.284,33.284,0,0,1-26.809,0L362,308.588l-37.6,16.586a33.283,33.283,0,0,1-26.81,0L260,308.587,222.4,325.173a33.279,33.279,0,0,1-26.81,0L158,308.588l-37.593,16.585a33.279,33.279,0,0,1-26.81,0L64,312.117ZM448,464H64V347.093l16.678,7.358a65.355,65.355,0,0,0,52.644,0L158,343.563l24.679,10.888a65.353,65.353,0,0,0,52.643,0L260,343.563l24.677,10.888a65.351,65.351,0,0,0,52.642,0L362,343.563l24.678,10.889a65.354,65.354,0,0,0,52.641,0l8.693-3.835L448.02,464Z' class='ci-primary'/>"],j=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M453.122,79.012a128,128,0,0,0-181.087.068l-15.511,15.7L241.142,79.114l-.1-.1a128,128,0,0,0-181.02,0l-6.91,6.91a128,128,0,0,0,0,181.019L235.485,449.314l20.595,21.578.491-.492.533.533L276.4,450.574,460.032,266.94a128.147,128.147,0,0,0,0-181.019ZM437.4,244.313,256.571,425.146,75.738,244.313a96,96,0,0,1,0-135.764l6.911-6.91a96,96,0,0,1,135.713-.051l38.093,38.787,38.274-38.736a96,96,0,0,1,135.765,0l6.91,6.909A96.11,96.11,0,0,1,437.4,244.313Z' class='ci-primary'/>"];const N=()=>{const[i,_]=p.useState({todays_birthdays:{customers:[],relatives:[]},todays_anniversaries:[],upcoming_birthdays:{customers:[],relatives:[]},upcoming_anniversaries:[]}),[w,C]=p.useState(window.innerWidth);p.useEffect(()=>{(async()=>{try{const d=await(await fetch("/api/dashboard")).json();_({todays_birthdays:d.todays_birthdays||{customers:[],relatives:[]},todays_anniversaries:d.todays_anniversaries||[],upcoming_birthdays:d.upcoming_birthdays||{customers:[],relatives:[]},upcoming_anniversaries:d.upcoming_anniversaries||[]})}catch(o){console.error("Error fetching dashboard data:",o)}})();const r=()=>{C(window.innerWidth)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const x=(a,r)=>`${r==="birthday"?"Happy Birthday":"Happy Anniversary"} ${a.name} - Team Kekiz!`,b=(a,r,o)=>`${a} coming on ${o}! Celebrate with ${r}. Please order quickly, we have a special discount - Team Kekiz!`,n=a=>a.customer?a.customer.mobile:a.mobile,t=a=>a.relation?`${a.relation} - ${a.customer.name}`:a.name,u=w<=768;return s.jsxs("div",{style:$,children:[s.jsxs("div",{style:u?f:v,children:[s.jsxs("div",{style:l,children:[s.jsx("h3",{children:"ðŸŽ‚ Today's Birthdays"}),s.jsx("div",{style:m,children:i.todays_birthdays.customers.length>0||i.todays_birthdays.relatives.length>0?i.todays_birthdays.customers.concat(i.todays_birthdays.relatives).map((a,r)=>s.jsxs("div",{style:h,children:[s.jsx(e,{icon:g,style:y}),s.jsxs("p",{children:[s.jsx("strong",{children:t(a)})," - ",a.birthdate]}),s.jsx("a",{className:"btn btn-outline-success btn-sm",href:`sms:+91${n(a)}?body=${x(a,"birthday")}`,children:s.jsx(e,{icon:c})})]},r)):s.jsx("p",{children:"No birthdays today."})})]}),s.jsxs("div",{style:l,children:[s.jsx("h3",{children:"ðŸ’– Today's Anniversaries"}),s.jsx("div",{style:m,children:i.todays_anniversaries.length>0?i.todays_anniversaries.map((a,r)=>s.jsxs("div",{style:h,children:[s.jsx(e,{icon:j,style:y}),s.jsxs("p",{children:[s.jsx("strong",{children:t(a)})," - ",a.anniversary_date]}),s.jsx("a",{className:"btn btn-outline-success btn-sm",href:`sms:+91${n(a)}?body=${x(a,"anniversary")}`,children:s.jsx(e,{icon:c})})]},r)):s.jsx("p",{children:"No anniversaries today."})})]})]}),s.jsxs("div",{style:u?f:v,children:[s.jsxs("div",{style:l,children:[s.jsx("h3",{children:"ðŸŽˆ Upcoming Birthdays"}),s.jsx("div",{style:m,children:i.upcoming_birthdays.customers.length>0||i.upcoming_birthdays.relatives.length>0?i.upcoming_birthdays.customers.concat(i.upcoming_birthdays.relatives).map((a,r)=>s.jsxs("div",{style:h,children:[s.jsx(e,{icon:g,style:y}),s.jsxs("p",{children:[s.jsx("strong",{children:t(a)})," - ",a.birthdate]}),s.jsx("a",{className:"btn btn-outline-success btn-sm",href:`sms:+91${n(a)}?body=${b("Birthday",a.name,a.birthdate)}`,children:s.jsx(e,{icon:c})})]},r)):s.jsx("p",{children:"No upcoming birthdays."})})]}),s.jsxs("div",{style:l,children:[s.jsx("h3",{children:"âœ¨ Upcoming Anniversaries"}),s.jsx("div",{style:m,children:i.upcoming_anniversaries.length>0?i.upcoming_anniversaries.map((a,r)=>s.jsxs("div",{style:h,children:[s.jsx(e,{icon:j,style:y}),s.jsxs("p",{children:[s.jsx("strong",{children:t(a)})," - ",a.anniversary_date]}),s.jsx("a",{className:"btn btn-outline-success btn-sm",href:`sms:+91${n(a)}?body=${b("Anniversary",a.name,a.anniversary_date)}`,children:s.jsx(e,{icon:c})})]},r)):s.jsx("p",{children:"No upcoming anniversaries."})})]})]})]})},$={display:"flex",flexDirection:"column",gap:"20px",padding:"20px",fontFamily:"Arial, sans-serif"},v={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},f={display:"grid",gridTemplateColumns:"1fr",gap:"20px"},l={backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"0.3s"},h={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid #ddd"},y={fontSize:"20px",marginRight:"10px"},m={maxHeight:"200px",overflowY:"auto"};export{N as default};
