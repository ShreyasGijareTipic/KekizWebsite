import{r as l,m as h,j as n}from"./index-Bg23EJBh.js";import{a as y}from"./axios-upsvKRUO.js";const S=()=>{const[i,d]=l.useState({client_name:"",mobile:"",email:"",query:"",products_id:"",user_id:""}),[c,p]=l.useState([]),o=h(),s={container:{fontFamily:"Arial, sans-serif",padding:"16px",maxWidth:"600px",margin:"0 auto"},title:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px"},subtitle:{fontSize:"14px",color:"#666",marginBottom:"16px"},label:{display:"block",fontSize:"14px",marginBottom:"4px",color:"#333"},input:{width:"100%",padding:"12px",marginBottom:"16px",borderRadius:"8px",border:"1px solid #ccc",fontSize:"14px"},button:{width:"100%",padding:"12px",backgroundColor:"#ccc",borderRadius:"8px",border:"none",color:"white",fontSize:"16px",cursor:"pointer"},buttonActive:{backgroundColor:"green"}};l.useEffect(()=>{var t,a,r,u;const e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&typeof e.token=="string"&&e.token.length>0?d({client_name:((t=e.user)==null?void 0:t.name)||"",mobile:((a=e.user)==null?void 0:a.mobile)||"",email:((r=e.user)==null?void 0:r.email)||"",query:"",products_id:2,user_id:((u=e.user)==null?void 0:u.id)||""}):o("/login")},[o]);const m=e=>{const{name:t,value:a}=e.target;d(r=>({...r,[t]:a}))},b=e=>{p([...e.target.files])},x=async e=>{if(e.preventDefault(),!i.query||!i.products_id){alert("Please fill in all required fields.");return}const t=new FormData;t.append("client_name",i.client_name),t.append("mobile",i.mobile),t.append("email",i.email),t.append("query",i.query),t.append("products_id",i.products_id),t.append("user_id",i.user_id),c.forEach(a=>{t.append("screenshots[]",a)});try{const a=await y.post("http://127.0.0.1:8000/api/tickets",t,{headers:{"Content-Type":"multipart/form-data"}});alert("Ticket submitted successfully!"),o("/dashboard")}catch{alert("Failed to submit ticket. Please try again.")}};return n.jsxs("div",{style:s.container,children:[n.jsx("h1",{style:s.title,children:"Raise a Ticket"}),n.jsx("p",{style:s.subtitle,children:"Fill in the details to submit your ticket"}),n.jsxs("form",{onSubmit:x,children:[n.jsxs("div",{children:[n.jsx("label",{style:s.label,children:"Query:"}),n.jsx("input",{type:"text",name:"query",value:i.query,onChange:m,style:s.input,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{style:s.label,children:"Screenshots:"}),n.jsx("input",{type:"file",multiple:!0,onChange:b,style:s.input})]}),n.jsx("button",{type:"submit",style:i.query&&i.products_id?{...s.button,...s.buttonActive}:s.button,children:"Submit"})]})]})};export{S as default};
