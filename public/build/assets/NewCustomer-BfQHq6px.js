import{w as j,r as c,m as y,j as e}from"./index-Bg23EJBh.js";import{a as g,f as N,h as k}from"./api-8_quPuaU.js";import{C as w}from"./CRow-Cu5LofkQ.js";import{C as _}from"./CCol-YFH1-bI8.js";import{C as F,a as L}from"./CCardBody-Jm5-jwwI.js";import{C as S}from"./CCardHeader-VfQPesaz.js";import{C as E}from"./CForm-DKH37w0G.js";import{C as l}from"./CFormLabel-Cqbh7rjs.js";import{C as u}from"./CFormInput-DUEAMG4e.js";import{C as I}from"./CFormSelect-CaG7Qby9.js";import{C as q}from"./CFormTextarea-CtHgCKgl.js";import{C as P}from"./CFormCheck-BYapryZ9.js";import{a as p}from"./index.esm-8VmjjbFz.js";const O=()=>{const{showToast:m}=j(),[s,t]=c.useState({name:"",mobile:"",discount:0,company_id:0,show:!0,address:""}),i=g(),[C,h]=c.useState([]),b=y();c.useEffect(()=>{try{N("/api/company").then(a=>{if(a!=null&&a.length){const o=a.map(r=>({label:r.company_name,value:r.company_id}));i.type===0?(h(o),o.length>0&&t({...s,company_id:o[0].value})):(h(o.filter(r=>r.value===i.company_id)),t(r=>({...r,company_id:i.company_id})))}})}catch(a){m("danger","Error occurred "+a)}},[i.type,i.company_id,s]);const n=a=>{const{name:o,value:r}=a.target;t({...s,[o]:r})},x=a=>{const{name:o,checked:r}=a.target;t({...s,[o]:r})},f=async a=>{a.preventDefault();const o=a.target;if(!o.checkValidity()){o.classList.add("was-validated");return}let r={...s};try{const d=await k("/api/customer",r);d!=null&&d.id&&(m("success","Customer created"),b("/usermanagement/all-users"),m("danger","Error occurred, please try again later."))}catch(d){m("danger","Error occurred "+d)}},v=()=>{t({name:"",mobile:"",discount:0,company_id:s.company_id,show:!0,address:""})};return e.jsx(w,{children:e.jsx(_,{xs:12,children:e.jsxs(F,{className:"mb-4",children:[e.jsx(S,{children:e.jsx("strong",{children:"Create New Customer"})}),e.jsx(L,{children:e.jsxs(E,{className:"needs-validation",noValidate:!0,onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"pname",children:"Customer Name"}),e.jsx(u,{type:"text",id:"pname",placeholder:"Customer Name",name:"name",value:s.name,onChange:n,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Name is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"plmobile",children:"Mobile Number"}),e.jsx(u,{type:"text",id:"plmobile",placeholder:"Mobile Number",name:"mobile",value:s.mobile,onChange:n,pattern:"\\d{10}",required:!0,minLength:10,maxLength:10,feedbackInvalid:"Please provide valid mobile number.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Mobile number is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"categoryId",children:"Company "}),e.jsx(I,{"aria-label":"Select Category",name:"company_id",value:s.company_id,options:C,onChange:n,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Please select a company"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(q,{id:"address",rows:2,name:"address",value:s.address,onChange:n})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{htmlFor:"discount",children:"Special Discount (%) "}),e.jsx(u,{type:"number",id:"discount",placeholder:"5%",name:"discount",value:s.discount,onChange:n,feedbackInvalid:"Please provide valid number.",feedbackValid:"Looks good!"})]}),e.jsx("div",{className:"mb-3",children:e.jsx(P,{id:"flexCheckDefault",label:"Show for invoicing",name:"show",checked:s.show,onChange:x})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(p,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(p,{color:"secondary",onClick:v,children:"Clear"})]})]})})]})})})};export{O as default};
