import{y as f,w as g,r as l,m as _,j as e}from"./index-CoZNXrT3.js";import{a as N,f as p,p as E}from"./api-8_quPuaU.js";import{C as F}from"./CRow-C1kAJa4E.js";import{C as w}from"./CCol-6gv0qfQb.js";import{C as S,a as D}from"./CCardBody-KiBmAR96.js";import{C as L}from"./CCardHeader-CzKoGM0V.js";import{C as k}from"./CForm-CWuSMnRv.js";import{C as o}from"./CFormLabel-DOuP-TYD.js";import{C as m}from"./CFormInput-D071rTfS.js";import{a as y}from"./index.esm-DG3saitl.js";const z=()=>{const b=f(),{showToast:i}=g(),[s,c]=l.useState({name:"",mobile:"",discount:0,company_id:0,address:"",birthdate:"",anniversary_date:""}),u=N(),[q,h]=l.useState([]),C=_();l.useEffect(()=>{try{x(),p("/api/company").then(a=>{if(a){const t=a.map(r=>({label:r.company_name,value:r.company_id}));u.type===0?h(t):h(t.filter(r=>r.value===u.company_id))}})}catch(a){i("danger","Error occurred "+a)}},[]);const x=async()=>{try{const a=await p("/api/customer/"+b.id);c({id:a.id,name:a.name,mobile:a.mobile,discount:a.discount,company_id:a.company_id,address:a.address,birthdate:a.birthdate||"",anniversary_date:a.anniversary_date||""})}catch(a){i("danger","Error occurred "+a)}},d=a=>{const{name:t,value:r}=a.target;c({...s,[t]:r})},v=async a=>{a.preventDefault();const t=a.target;if(!t.checkValidity()){t.classList.add("was-validated");return}let r={...s};try{const n=await E("/api/customer/"+r.id,r);n!=null&&n.id?(i("success","Customer updated successfully"),C("/customer/all")):i("danger","Error occurred, please try again later.")}catch(n){i("danger","Error occurred "+n)}},j=()=>{c({name:"",mobile:"",discount:0,company_id:s.company_id,address:"",birthdate:"",anniversary_date:""})};return e.jsx(F,{children:e.jsx(w,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(L,{children:e.jsx("strong",{children:"Edit Customer Details"})}),e.jsx(D,{children:e.jsxs(k,{className:"needs-validation",noValidate:!0,onSubmit:v,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"pname",children:"Customer Name"}),e.jsx(m,{type:"text",id:"pname",placeholder:"Customer Name",name:"name",value:s.name,onChange:d,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Name is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"plmobile",children:"Mobile Number"}),e.jsx(m,{type:"text",id:"plmobile",placeholder:"Mobile Number",name:"mobile",value:s.mobile,onChange:d,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Mobile number is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"birthdate",children:"Birthdate"}),e.jsx(m,{type:"date",id:"birthdate",name:"birthdate",value:s.birthdate,onChange:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"anniversary_date",children:"Anniversary Date"}),e.jsx(m,{type:"date",id:"anniversary_date",name:"anniversary_date",value:s.anniversary_date,onChange:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(y,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(y,{color:"secondary",onClick:j,children:"Clear"})]})]})})]})})})};export{z as default};
