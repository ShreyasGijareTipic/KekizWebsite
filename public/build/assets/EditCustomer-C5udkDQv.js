import{y as g,w as N,r as m,j as e}from"./index-Bg23EJBh.js";import{a as k,f as h,p as w}from"./api-8_quPuaU.js";import{C as F}from"./CRow-Cu5LofkQ.js";import{C as _}from"./CCol-YFH1-bI8.js";import{C as E,a as S}from"./CCardBody-Jm5-jwwI.js";import{C as L}from"./CCardHeader-VfQPesaz.js";import{C as q}from"./CForm-DKH37w0G.js";import{C as c}from"./CFormLabel-Cqbh7rjs.js";import{C as p}from"./CFormInput-DUEAMG4e.js";import{C as D}from"./CFormSelect-CaG7Qby9.js";import{C as I}from"./CFormTextarea-CtHgCKgl.js";import{C as P}from"./CFormCheck-BYapryZ9.js";import{a as C}from"./index.esm-8VmjjbFz.js";const Q=()=>{const b=g(),{showToast:t}=N(),[r,d]=m.useState({name:"",mobile:"",discount:0,company_id:0,show:!0}),l=k(),[x,u]=m.useState([]);m.useEffect(()=>{try{f(),h("/api/company").then(a=>{if(a){const o=a.map(s=>({label:s.company_name,value:s.company_id}));l.type===0?u(o):u(o.filter(s=>s.value===l.company_id))}})}catch(a){t("danger","Error occured "+a)}},[]);const f=async()=>{try{const a=await h("/api/customer/"+b.id);d({id:a.id,name:a.name,mobile:a.mobile,discount:a.discount,company_id:a.company_id,show:a.show,address:a.address})}catch(a){t("danger","Error occured "+a)}},n=a=>{const{name:o,value:s}=a.target;d({...r,[o]:s})},y=a=>{const{name:o,checked:s}=a.target;d({...r,[o]:s})},j=async a=>{a.preventDefault();const o=a.target;if(!o.checkValidity()){o.classList.add("was-validated");return}let s={...r};try{const i=await w("/api/customer/"+s.id,s);i!=null&&i.id?t("success","Customer updated successfully"):t("danger","Error occured, please try again later.")}catch(i){t("danger","Error occured "+i)}},v=()=>{d({name:"",mobile:"",discount:0,company_id:r.company_id,show:!0})};return e.jsx(F,{children:e.jsx(_,{xs:12,children:e.jsxs(E,{className:"mb-4",children:[e.jsx(L,{children:e.jsx("strong",{children:"Edit Customer Details"})}),e.jsx(S,{children:e.jsxs(q,{className:"needs-validation",noValidate:!0,onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"pname",children:"Customer Name"}),e.jsx(p,{type:"text",id:"pname",placeholder:"Customer Name",name:"name",value:r.name,onChange:n,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Name is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"plmobile",children:"Mobile Number"}),e.jsx(p,{type:"text",id:"plmobile",placeholder:"Mobile Number",name:"mobile",value:r.mobile,onChange:n,required:!0,feedbackInvalid:"Please provide mobile number.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Mobile number is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"categoryId",children:"Company "}),e.jsx(D,{"aria-label":"Select Category",name:"company_id",value:r.company_id,options:x,onChange:n,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Please select a company"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"address",children:"Address"}),e.jsx(I,{id:"address",rows:2,name:"address",value:r.address,onChange:n})]}),e.jsx("div",{className:"mb-3",children:e.jsx(P,{id:"flexCheckDefault",label:"Show for invoicing",name:"show",checked:r.show,onChange:y})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(C,{color:"secondary",onClick:v,children:"Clear"})]})]})})]})})})};export{Q as default};
