import{w as v,r as x,j as e}from"./index-OeoBNat3.js";import{h as b}from"./api-8_quPuaU.js";import{C as f}from"./CRow-B0v1wP3B.js";import{C as y}from"./CCol-BhG1DmFz.js";import{C as P,a as S}from"./CCardBody-HZcxyyc1.js";import{C as N}from"./CCardHeader-D3QUcPyo.js";import{C as q}from"./CForm-nOHKzzo5.js";import{C as c}from"./CFormLabel-DxfY1rNV.js";import{C as u}from"./CFormInput-BMIMxTq1.js";import{C as k}from"./CFormSelect-B3syApAW.js";import{a as n}from"./index.esm-BSQayu9G.js";const H=()=>{const{showToast:d}=v(),[a,o]=x.useState({name:"",sizes:[{size:"",qty:0,oPrice:0,bPrice:0}]}),p=[{label:"500 gm",value:"500 gm"},{label:"1 kg",value:"1 kg"},{label:"2 kg",value:"2 kg"},{label:"5 kg",value:"5 kg"}],C=t=>{const{name:s,value:r}=t.target;o({...a,[s]:r})},m=(t,s)=>{const{name:r,value:i}=s.target,l=[...a.sizes];l[t]={...l[t],[r]:i},o({...a,sizes:l})},j=()=>{o({...a,sizes:[...a.sizes,{size:"",qty:0,oPrice:0,bPrice:0}]})},z=t=>{const s=a.sizes.filter((r,i)=>i!==t);o({...a,sizes:s})},g=async t=>{t.preventDefault();const s=t.target;if(!s.checkValidity()){s.classList.add("was-validated");return}const r=a.sizes.length>1,i={name:a.name,multiSize:r,sizes:a.sizes};try{await b("/api/products",i)?(d("success","Product added successfully"),h()):d("danger","Error occurred, please try again later.")}catch(l){d("danger","Error occurred: "+l.message)}},h=()=>{o({name:"",sizes:[{size:"",qty:0,oPrice:0,bPrice:0}]})};return e.jsx(f,{children:e.jsx(y,{xs:12,children:e.jsxs(P,{className:"mb-4",children:[e.jsx(N,{children:e.jsx("strong",{children:"Create New Product"})}),e.jsx(S,{children:e.jsxs(q,{className:"needs-validation",noValidate:!0,onSubmit:g,children:[e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-6",children:[e.jsx(c,{htmlFor:"pname",children:"Product Name"}),e.jsx(u,{type:"text",id:"pname",placeholder:"Product Name",name:"name",value:a.name,onChange:C,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Product name is required"})]})}),a.sizes.map((t,s)=>e.jsxs("div",{className:"row mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(c,{htmlFor:`size_${s}`,children:"Size"}),e.jsxs(k,{id:`size_${s}`,name:"size",value:t.size,onChange:r=>m(s,r),required:!0,children:[e.jsx("option",{value:"",children:"Select Size"}),p.map((r,i)=>e.jsx("option",{value:r.value,children:r.label},i))]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(c,{htmlFor:`qty_${s}`,children:"Quantity"}),e.jsx(u,{type:"number",id:`qty_${s}`,placeholder:"0",min:"1",name:"qty",value:t.qty,onChange:r=>m(s,r),required:!0})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(c,{htmlFor:`oPrice_${s}`,children:"Selling Price"}),e.jsx(u,{type:"number",id:`oPrice_${s}`,placeholder:"0",min:"1",name:"oPrice",value:t.oPrice,onChange:r=>m(s,r),required:!0})]}),e.jsxs("div",{className:"col-12 mt-2",children:[a.sizes.length>1&&e.jsx(n,{color:"danger",onClick:()=>z(s),children:"-"}),s===a.sizes.length-1&&e.jsx(n,{color:"primary",onClick:j,children:"+"})]})]},s)),e.jsxs("div",{className:"mb-3",children:[e.jsx(n,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(n,{color:"secondary",onClick:h,children:"Clear"})]})]})})]})})})};export{H as default};
