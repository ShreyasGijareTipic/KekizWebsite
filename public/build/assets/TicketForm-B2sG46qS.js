import{r as s,m as y,j as e}from"./index-Bg23EJBh.js";import{a as f}from"./axios-upsvKRUO.js";const i={container:{fontFamily:"Arial, sans-serif",padding:"16px",maxWidth:"600px",margin:"0 auto"},title:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px"},subtitle:{fontSize:"14px",color:"#666",marginBottom:"16px"},label:{display:"block",fontSize:"14px",marginBottom:"4px",color:"#333"},input:{width:"100%",padding:"12px",marginBottom:"16px",borderRadius:"8px",border:"1px solid #ccc",fontSize:"14px"},button:{width:"100%",padding:"12px",backgroundColor:"#ccc",borderRadius:"8px",border:"none",color:"white",fontSize:"16px",cursor:"pointer"},buttonActive:{backgroundColor:"green"}},_=()=>{const[t,u]=s.useState({client_name:"",mobile:"",email:"",query:"",products_id:2}),[c,d]=s.useState([]),[o,p]=s.useState({}),m=y(),b=()=>{const n={};return t.client_name.trim()?/^[a-zA-Z\s]+$/.test(t.client_name)||(n.client_name="Name can only contain letters and spaces."):n.client_name="Name is required.",t.mobile.trim()?/^\d{10}$/.test(t.mobile)||(n.mobile="Mobile number must be exactly 10 digits and Have numbers in it."):n.mobile="Mobile number is required.",p(n),Object.keys(n).length===0},a=n=>{const{name:l,value:r}=n.target;u({...t,[l]:r})},x=n=>{d([...n.target.files])},h=async n=>{if(n.preventDefault(),!b())return;if(!t.query||!t.products_id){alert("Please fill in all required fields.");return}const l=new FormData;l.append("client_name",t.client_name),l.append("mobile",t.mobile),l.append("email",t.email),l.append("query",t.query),l.append("products_id",t.products_id);for(let r=0;r<c.length;r++)l.append("screenshots[]",c[r]);try{const r=await f.post("http://127.0.0.1:8000/api/tickets",l,{headers:{"Content-Type":"multipart/form-data"}});alert("Ticket submitted successfully!"),m("/login")}catch(r){alert("Ticket submission failed."),console.error("Error submitting ticket:",r)}};return e.jsxs("div",{style:i.container,children:[e.jsx("h1",{style:i.title,children:"Raise a Ticket"}),e.jsx("p",{style:i.subtitle,children:"If you don't find the solution in the FAQ, raise a query."}),e.jsxs("form",{onSubmit:h,children:[e.jsx("label",{style:i.label,children:"Your Name*"}),e.jsx("input",{type:"text",style:i.input,name:"client_name",placeholder:"Enter your name",value:t.client_name,onChange:a,required:!0}),o.client_name&&e.jsx("p",{style:{color:"red",fontSize:"12px"},children:o.client_name}),e.jsx("label",{style:i.label,children:"Mobile*"}),e.jsx("input",{type:"text",style:i.input,name:"mobile",placeholder:"Enter your mobile number",value:t.mobile,onChange:a,required:!0}),o.mobile&&e.jsx("p",{style:{color:"red",fontSize:"12px"},children:o.mobile}),e.jsx("label",{style:i.label,children:"Email (Optional)"}),e.jsx("input",{type:"email",style:i.input,name:"email",placeholder:"Enter your email",value:t.email,onChange:a}),e.jsx("label",{style:i.label,children:"Your Query*"}),e.jsx("textarea",{rows:"4",style:i.input,name:"query",placeholder:"Describe your issue here...",value:t.query,onChange:a,required:!0}),e.jsx("label",{style:i.label,children:"Product*"}),e.jsxs("select",{name:"products_id",style:i.input,value:t.products_id,onChange:a,required:!0,children:[e.jsx("option",{value:"",children:"Select a product"}),e.jsx("option",{value:"1",children:"Dr Assist"}),e.jsx("option",{value:"2",children:"Aqua Logix"})]}),e.jsx("label",{style:i.label,children:"Upload Screenshots (Optional)"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",style:i.input,onChange:x}),e.jsx("button",{type:"submit",style:{...i.button,...t.query&&t.products_id?i.buttonActive:{}},children:"Raise Ticket"})]})]})};export{_ as default};
