import{m as g,r as s,w as x,j as r}from"./index-OeoBNat3.js";import{M as j}from"./mantine-react-table.esm-Bh17kATt.js";import{f as v,m as w}from"./api-8_quPuaU.js";import{C as A}from"./ConfirmationModal-FavM7S59.js";import{C as D}from"./CRow-B0v1wP3B.js";import{C as n}from"./DefaultLayout-B6SAEV22.js";import"./Table-P8BCIZiY.js";import"./CModalTitle-CTXksQDY.js";import"./index.esm-BSQayu9G.js";import"./cil-mobile-BLiG_LYI.js";const k=()=>{const c=g(),[l,d]=s.useState([]),[t,m]=s.useState(),[u,a]=s.useState(!1),{showToast:o}=x(),i=async()=>{try{const e=await v("/api/customer");d(e)}catch(e){o("danger","Error occurred "+e)}};s.useEffect(()=>{i()},[]);const h=e=>{m(e),a(!0)},f=async()=>{try{await w("/api/customer/"+t.id),a(!1),i()}catch(e){o("danger","Error occurred "+e)}},p=e=>{c("/customer/edit/"+e.id)},C=[{accessorKey:"index",header:"Id"},{accessorKey:"name",header:"Name"},{accessorKey:"mobile",header:"Mobile"},{accessorKey:"birthdate",header:"Birthdate"},{accessorKey:"anniversary_date",header:"Anniversary Date"},{accessorKey:"actions",header:"Actions",Cell:({cell:e})=>r.jsxs("div",{children:[r.jsx(n,{role:"button",color:"info",onClick:()=>p(e.row.original),children:"Edit"}),"Â ",r.jsx(n,{role:"button",color:"danger",onClick:()=>h(e.row.original),children:"Delete"})]})}],b=l.map((e,y)=>({...e,index:y+1,birthdate:e.birthdate||"N/A",anniversary_date:e.anniversary_date||"N/A"}));return r.jsxs(D,{children:[r.jsx(A,{visible:u,setVisible:a,onYes:f,resource:"Delete customer - "+(t==null?void 0:t.name)}),r.jsx(j,{enableColumnResizing:!0,columns:C,data:b,enableFullScreenToggle:!1})]})};export{k as default};
