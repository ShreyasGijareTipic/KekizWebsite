import{m as x,r as a,w as C,j as o}from"./index-Bg23EJBh.js";import{M as k}from"./mantine-react-table.esm-Q6Itqhmp.js";import{f as w,p as j}from"./api-8_quPuaU.js";import{C as _}from"./ConfirmationModal-CQe-o_rD.js";import{C as E}from"./CRow-Cu5LofkQ.js";import{C as r}from"./DefaultLayout-ClwM_41s.js";import"./Table-AyJUSGqJ.js";import"./CModalTitle-CtLHuCtH.js";import"./index.esm-8VmjjbFz.js";import"./cil-mobile-BTelR--Q.js";const F=()=>{const i=x(),[l,d]=a.useState([]),[s,m]=a.useState(),[u,t]=a.useState(!1),{showToast:c}=C(),n=async()=>{try{const e=await w("/api/company");d(e)}catch(e){c("danger","Error occured "+e)}};a.useEffect(()=>{n()},[]);const p=e=>{m(e),t(!0)},h=async()=>{try{await j("/api/company/"+s.company_id,{...s,block_status:s.block_status==0}),t(!1),n(),c("success","Updated successfully")}catch(e){c("danger","Error occured "+e)}},g=e=>{i("/company/edit/"+e.id)},y=[{accessorKey:"index",header:"Id"},{accessorKey:"company_name",header:"Name"},{accessorKey:"phone_no",header:"Mobile"},{accessorKey:"Tal",header:"Address",Cell:({cell:e})=>o.jsxs(o.Fragment,{children:[e.row.original.land_mark,",",e.row.original.Tal,",",e.row.original.Dist]})},{accessorKey:"block_status",header:"Status",Cell:({cell:e})=>e.row.original.block_status==0?o.jsx(r,{color:"success",children:"Active"}):o.jsx(r,{color:"danger",children:"Blocked"})},{accessorKey:"actions",header:"Actions",Cell:({cell:e})=>o.jsxs("div",{children:[o.jsx(r,{role:"button",color:"info",onClick:()=>g(e.row.original),children:"Edit"}),"Â ",o.jsx(r,{role:"button",color:"danger",onClick:()=>p(e.row.original),children:e.row.original.block_status==0?"Block":"Unblock"})]})}],f=l.map((e,b)=>({...e,index:b+1}));return o.jsxs(E,{children:[o.jsx(_,{visible:u,setVisible:t,onYes:h,resource:'Block company "'+(s==null?void 0:s.company_name)+'"'}),o.jsx(k,{enableColumnResizing:!0,columns:y,data:f,enableFullScreenToggle:!1})]})};export{F as default};
