import{r as h,w as _,m as v,j as e}from"./index-OeoBNat3.js";import{h as y}from"./api-8_quPuaU.js";import{u as b}from"./DefaultLayout-B6SAEV22.js";import{C as L}from"./CRow-B0v1wP3B.js";import{C as w}from"./CCol-BhG1DmFz.js";import{C as S,a as N}from"./CCardBody-HZcxyyc1.js";import{C as E}from"./CCardHeader-D3QUcPyo.js";import{C as B}from"./CForm-nOHKzzo5.js";import{C as m}from"./CFormLabel-DxfY1rNV.js";import{C as u}from"./CFormInput-BMIMxTq1.js";import{C as k}from"./CFormTextarea-B_YXzpvY.js";import{C as F}from"./CFormCheck-B63ut1Bj.js";import{a as x}from"./index.esm-BSQayu9G.js";import"./cil-mobile-BLiG_LYI.js";const O=()=>{const[C,i]=h.useState(!1),{showToast:l}=_(),f=v(),{t:a}=b("global"),[s,c]=h.useState({name:"",slug:"",localName:"",desc:"",show:!0}),d=r=>{const{name:o,value:t}=r.target;c({...s,[o]:t})},j=r=>{const{name:o,checked:t}=r.target;c({...s,[o]:t})},g=async r=>{const o=r.currentTarget;if(r.preventDefault(),r.stopPropagation(),i(!0),o.checkValidity()!==!0)return;let t={...s};t.slug=t.name.replace(/[^\w]/g,"_");try{const n=await y("/api/expenseType",t);n!=null&&n.id?(l("success",a("MSG.expense_type_added_successfully_msg")),f("/expense/new")):l("danger",a("MSG.failed_to_add_expense_type_msg")),p()}catch(n){l("danger","Error occured "+n)}},p=async()=>{c({name:"",slug:"",localName:"",desc:"",show:!0}),i(!1)};return e.jsx(L,{children:e.jsx(w,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(E,{children:e.jsx("strong",{children:a("LABELS.create_new_expense_type")})}),e.jsx(N,{children:e.jsxs(B,{noValidate:!0,validated:C,onSubmit:g,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"pname",children:a("LABELS.expense_type_name")}),e.jsx(u,{type:"text",id:"pname",placeholder:"",name:"name",value:s.name,onChange:d,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"pname",children:a("LABELS.expense_type_local_name")}),e.jsx(u,{type:"text",id:"plname",placeholder:"",name:"localName",value:s.localName,onChange:d,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(m,{htmlFor:"desc",children:a("LABELS.short_description")}),e.jsx(k,{id:"desc",rows:3,name:"desc",value:s.desc,onChange:d,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(F,{id:"flexCheckDefault",label:a("LABELS.show_for_expense_records"),name:"show",checked:s.show,onChange:j})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{color:"success",type:"submit",children:a("LABELS.submit")}),"Â ",e.jsx(x,{color:"secondary",onClick:p,children:a("LABELS.clear")})]})]})})]})})})};export{O as default};
